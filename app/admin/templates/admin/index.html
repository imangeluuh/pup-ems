{% extends 'admin/base.html' %}

{% block head %}
    <title>PUP-ESIS Calendar</title>
    <link href="https://fonts.googleapis.com/css2?family=Source+Sans+Pro:wght@300;400;600;700&display=swap" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.16/dist/tailwind.min.css" rel="stylesheet">
    <link href="{{ url_for('static', filename='css/tailwind.min.css') }}" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.8/index.global.min.css">
    <script src="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.8/index.global.min.js"></script>
    <style>
        body {
            font-family: 'Poppins', sans-serif;
        }
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            justify-content: center;
            align-items: center;
        }
        .modal-content {
            background-color: white;
            padding: 20px;
            border-radius: 8px;
            max-width: 30%; 
            margin: 0 auto; 
        }

        #calendar .fc-event {
        cursor: pointer;
        }

        #calendar .fc-event,
        #closeModal {
            cursor: pointer;
        }
    </style>
{% endblock %}

{% block content %}
    {% include 'admin/components/sidebar.html' %}

    <div class="ml-64 mt-8 p-4 bg-red-900 rounded-lg">
        <h3 class="p-4 text-3xl text-white font-bold rounded-t-lg">Activity Calendar</h3> 
        <div class="flex p-4">
            <div class="w-1/4 p-4 bg-white rounded-lg">
                <h2 class="text-xl font-semibold mb-4">Today's Activity</h2>
                <ul>
                    <!-- {% if today_activities %}
                        {% for activity in today_activities %}
                            <li>- {{ activity[0] }}</li>
                        {% endfor %}
                    {% else %} -->
                        <li>There are no planned activities for today.</li>
                    {% endif %}
                </ul>
            </div>
            <div class="w-3/4 pl-8">
                <div id="calendar" class="p-4 bg-white rounded-lg"></div>
            </div>
        </div>
    </div>
    
    <!-- Modal -->
    <div id="eventModal" class="modal">
        <div class="modal-content">
            <h2 class="text-xl font-semibold mb-4" id="eventTitle"></h2>
            <p id="eventStart" class="mb-4"></p>
            <p id="eventLocation" class="mb-4"></p>
            <p id="eventDescription" class="mb-4"></p>
            <div style="display: flex; justify-content: flex-end;">
                <button id="closeModal" class="bg-gray-500 text-white px-4 py-2 rounded-lg mt-4">Close</button>
            </div>
        </div>
    </div>
    
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            let calendarEl = document.getElementById('calendar');
            let calendar = new FullCalendar.Calendar(calendarEl, {
                events: [
                    {
                        title: 'Activity 1',
                        start: '2023-08-30',
                        location: 'PUPQC', 
                        description: 'Extension Project Activity', 
                    },
                    {
                        title: 'Activity 2',
                        start: '2023-09-01',
                        location: 'PUPQC', 
                        description: 'Extension Project Activity', 
                    },
                ],
                eventClick: function(info) {
                    const modal = document.getElementById('eventModal');
                    const titleElement = document.getElementById('eventTitle');
                    const startElement = document.getElementById('eventStart');
                    const locationElement = document.getElementById('eventLocation'); 
                    const descriptionElement = document.getElementById('eventDescription'); 

                    titleElement.textContent = info.event.title;
                    startElement.textContent = 'Date: ' + info.event.start.toLocaleString();
                    locationElement.textContent = 'Location: ' + info.event.extendedProps.location; 
                    descriptionElement.textContent = 'Project Description: ' + info.event.extendedProps.description; 

                    modal.style.display = 'flex';
                }
            });

            calendar.render();

            const modal = document.getElementById('eventModal');
            const closeModal = document.getElementById('closeModal');
            closeModal.addEventListener('click', function(event) {
                modal.style.display = 'none';
            });
            window.addEventListener('click', function(event) {
                if (event.target === modal) {
                    modal.style.display = 'none';
                }
            });
        });
    </script>
{% endblock %}